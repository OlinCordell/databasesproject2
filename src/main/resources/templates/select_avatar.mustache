<!DOCTYPE html>
<html lang="en">
{{> fragments/html_header}}

<body>

    {{> fragments/top_bar}}

    <div class="container" style="max-width:800px; margin: 40px auto; text-align:center;">
        <h2 style="margin-bottom:20px;">Select Your Avatar</h2>

        {{#error}}
        <p style="color:red; font-weight:bold;">{{error}}</p>
        {{/error}}

        <!-- Form supports file upload now -->
        <form action="/profile/select-avatar" method="post" enctype="multipart/form-data">
            
            <!-- Predefined avatars -->
            <div style="display:flex; flex-wrap:wrap; justify-content:center; gap:20px; margin-bottom:30px;">
                {{#avatars}}
                <label style="cursor:pointer; display:flex; flex-direction:column; align-items:center; border:2px solid #ccc; border-radius:10px; padding:10px;">
                    <input type="radio" name="avatar" value="{{.}}" style="margin-bottom:10px;" />
                    <img src="{{.}}" alt="avatar" width="100" style="border-radius:50%;" />
                </label>
                {{/avatars}}
            </div>

            <!-- File upload for custom avatar -->
            <div style="margin-bottom:30px;">
                <label style="cursor:pointer; display:flex; flex-direction:column; align-items:center;">
                    <span style="margin-bottom:10px;">Or upload your own avatar:</span>
                    <input type="file" name="uploadedAvatar" accept="image/*" />
                </label>
            </div>

            <button type="submit" style="margin-top:10px; padding:10px 30px; font-size:16px; background-color:#4CAF50; color:white; border:none; border-radius:5px; cursor:pointer;">
                Save Avatar
            </button>
        </form>
    </div>

    {{> fragments/footer}}

</body>
</html>
