<!DOCTYPE html>
<html lang="en">
{{> fragments/html_header}}

<body>

    {{> fragments/top_bar}}

    <div class="container mt-4">
        <h2>Notifications</h2>

        <!-- Display error message if exists -->
        {{#errorMessage}}
            <div class="alert alert-danger">{{errorMessage}}</div>
        {{/errorMessage}}

        <!-- Display "No notifications" message -->
        {{#isNoContent}}
            <p>No notifications yet.</p>
        {{/isNoContent}}

        <!-- List of notifications -->
        {{#notifications}}
            <div class="notification-item {{#isRead}}read{{/isRead}} p-2 mb-2 border rounded">
                <div class="d-flex align-items-center">
                    <img src="{{sender.profileImagePath}}" alt="Sender" class="profile-img me-2" style="width:40px; height:40px; border-radius:50%;">
                    <div>
                        <strong>{{sender.firstName}} {{sender.lastName}}</strong> - {{message}}<br>
                        <small class="text-muted">{{createdAt}}</small>
                    </div>

                    <!-- Delete button -->
                    <form action="/notifications/delete" method="post" class="ms-auto">
                        <input type="hidden" name="notificationId" value="{{notificationId}}">
                        <button type="submit" class="btn btn-sm btn-outline-danger">Delete</button>
                    </form>
                </div>
            </div>
        {{/notifications}}

        <!-- Single mark-all form -->
        {{#notifications.0}} <!-- Only render if there are notifications -->
            <form action="/notifications/markAllRead" method="post" class="mt-3">
                <button type="submit" class="btn btn-primary">Mark All as Read</button>
            </form>
        {{/notifications.0}}

    </div>

    {{> fragments/footer}}

</body>
</html>
